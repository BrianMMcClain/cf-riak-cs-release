#!/usr/bin/env bash

# job template binding variables

# job name & index of this VM within cluster
# e.g. JOB_NAME=redis, JOB_INDEX=0
export NAME='<%= name %>'
export JOB_INDEX=<%= index %>
# full job name, like redis/0 or webapp/3
export JOB_FULL="$NAME/$JOB_INDEX"

export PORT=<%= p('broker.port', '9292') %>

export RIAK_CS_BROKER_USERNAME=<%= p('broker.username') %>
export RIAK_CS_BROKER_PASSWORD=<%= p('broker.password') %>
export RIAK_CS_HOST=<%= p('external_host') %>
export RIAK_CS_PORT=<%= p('riak_cs.ssl_enabled')? '443' : '80' %>
export RIAK_CS_SCHEME=<%= p('riak_cs.ssl_enabled')? 'https' : 'http' %>
export RIAK_CS_SSL_VALIDATION=<%= !p('riak_cs.skip_ssl_validation')%>
export RIAK_CS_ACCESS_KEY_ID=<%= p('riak_cs.admin_key') %>
export RIAK_CS_SECRET_ACCESS_KEY=<%= p('riak_cs.admin_secret') %>
